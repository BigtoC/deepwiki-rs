# Litho Main ç»„ä»¶æŠ€æœ¯æ–‡æ¡£

## 1. ç»„ä»¶æ¦‚è¿°ä¸èŒè´£

### 1.1 æ ¸å¿ƒåŠŸèƒ½å’Œä½œç”¨

Main ç»„ä»¶æ˜¯ Litho é¡¹ç›®çš„å…¥å£ç‚¹ï¼Œè´Ÿè´£ä»¥ä¸‹æ ¸å¿ƒåŠŸèƒ½ï¼š

1. **å‘½ä»¤è¡Œå‚æ•°è§£æ**ï¼šé€šè¿‡ clap åº“è§£æç”¨æˆ·æä¾›çš„å‘½ä»¤è¡Œå‚æ•°
2. **é…ç½®ç®¡ç†**ï¼šæ ¹æ®å‘½ä»¤è¡Œå‚æ•°åˆ›å»ºå’Œç®¡ç†é¡¹ç›®é…ç½®
3. **å·¥ä½œæµç¨‹åè°ƒ**ï¼šåè°ƒå„ä¸ªæ¨¡å—çš„å·¥ä½œæµç¨‹ï¼ŒåŒ…æ‹¬ï¼š
   - å…ƒæ•°æ®æå–
   - LLM åˆ†æ
   - æ–‡æ¡£ç”Ÿæˆ
   - æ–‡æ¡£è¾“å‡º
4. **ReAct æ¨¡å¼æ”¯æŒ**ï¼šæä¾›è‡ªä¸»æ¢ç´¢åˆ†ææ¨¡å¼
5. **é”™è¯¯å¤„ç†**ï¼šç»Ÿä¸€å¤„ç†é¡¹ç›®ä¸­çš„é”™è¯¯

### 1.2 ç»„ä»¶ç±»å‹å’Œé‡è¦æ€§è¯„åˆ†

- **ç»„ä»¶ç±»å‹**ï¼šå…¥å£ç»„ä»¶
- **é‡è¦æ€§è¯„åˆ†**ï¼š0.64
- **è¯´æ˜**ï¼šä½œä¸ºé¡¹ç›®çš„å…¥å£ç‚¹ï¼ŒMain ç»„ä»¶åœ¨æ•´ä¸ªé¡¹ç›®ä¸­èµ·ç€è‡³å…³é‡è¦çš„ä½œç”¨ã€‚å®ƒè´Ÿè´£åˆå§‹åŒ–å’Œåè°ƒæ‰€æœ‰å…¶ä»–ç»„ä»¶çš„å·¥ä½œï¼Œå› æ­¤å…¶é‡è¦æ€§è¯„åˆ†è¾ƒé«˜ã€‚

### 1.3 æ¶æ„ä¸­çš„ä½ç½®å’Œä»·å€¼

åœ¨ Litho çš„ C4 æ¶æ„æ¨¡å‹ä¸­ï¼ŒMain ç»„ä»¶ä½äºç³»ç»Ÿçš„æœ€å¤–å±‚ï¼Œä½œä¸ºç³»ç»Ÿä¸ç”¨æˆ·ä¹‹é—´çš„æ¥å£ã€‚å®ƒçš„ä¸»è¦ä»·å€¼åœ¨äºï¼š

1. **ç»Ÿä¸€å…¥å£**ï¼šä¸ºæ•´ä¸ªç³»ç»Ÿæä¾›ä¸€ä¸ªç»Ÿä¸€çš„å…¥å£ç‚¹
2. **åè°ƒä¸­å¿ƒ**ï¼šåè°ƒå„ä¸ªæ¨¡å—çš„å·¥ä½œæµç¨‹
3. **é…ç½®ç®¡ç†**ï¼šç®¡ç†å’Œä¼ é€’é¡¹ç›®é…ç½®
4. **é”™è¯¯å¤„ç†**ï¼šæä¾›ç»Ÿä¸€çš„é”™è¯¯å¤„ç†æœºåˆ¶

## 2. æºç ç»“æ„åˆ†æ

### 2.1 ä¸»è¦æ¨¡å—ã€ç±»ã€å‡½æ•°

```rust
// ä¸»è¦æ¨¡å—å¯¼å…¥
mod cli;
mod config;
mod generator;
mod llm;
mod metadata;
mod react;
mod tools;
mod utils;

// ä¸»è¦ç±»å‹å¯¼å…¥
use crate::llm::LLMService;
use cli::Cli;
use config::Config;
use generator::DocumentGeneratorManager;
use llm::{LlmManager, OpenAILikeLLMService};
use metadata::MetadataExtractor;
use react::LithoReactAgent;
use tools::outlet::DocumentOutlet;

// ä¸»å‡½æ•°
#[tokio::main]
async fn main() -> Result<()> {
    // å‘½ä»¤è¡Œå‚æ•°è§£æ
    let cli = Cli::parse();

    // é…ç½®åˆ›å»º
    let config = cli.to_config();

    // ä¸»è¦å·¥ä½œæµç¨‹
    // ...ï¼ˆè¯¦è§å®ç°ç»†èŠ‚éƒ¨åˆ†ï¼‰
}
```

### 2.2 å…³é”®æ•°æ®ç»“æ„å’Œç±»å‹å®šä¹‰

Main ç»„ä»¶ä¸»è¦ä½¿ç”¨ä»¥ä¸‹æ•°æ®ç»“æ„å’Œç±»å‹ï¼š

1. **Cli**ï¼šå‘½ä»¤è¡Œå‚æ•°è§£æå™¨ï¼Œå®šä¹‰åœ¨ `cli.rs` ä¸­
2. **Config**ï¼šé¡¹ç›®é…ç½®ç»“æ„ä½“ï¼Œå®šä¹‰åœ¨ `config.rs` ä¸­
3. **DocumentGeneratorManager**ï¼šæ–‡æ¡£ç”Ÿæˆå™¨ç®¡ç†å™¨ï¼Œå®šä¹‰åœ¨ `generator/mod.rs` ä¸­
4. **LlmManager**ï¼šLLM ç®¡ç†å™¨ï¼Œå®šä¹‰åœ¨ `llm/mod.rs` ä¸­
5. **MetadataExtractor**ï¼šå…ƒæ•°æ®æå–å™¨ï¼Œå®šä¹‰åœ¨ `metadata/mod.rs` ä¸­
6. **LithoReactAgent**ï¼šReAct æ¨¡å¼ä»£ç†ï¼Œå®šä¹‰åœ¨ `react/agent.rs` ä¸­

### 2.3 ä»£ç ç»„ç»‡æ¨¡å¼å’Œè®¾è®¡æ€è·¯

Main ç»„ä»¶é‡‡ç”¨ä»¥ä¸‹ä»£ç ç»„ç»‡æ¨¡å¼ï¼š

1. **æ¨¡å—åŒ–è®¾è®¡**ï¼šå°†ä¸åŒåŠŸèƒ½æ¨¡å—åˆ†ç¦»åˆ°ä¸åŒçš„æ–‡ä»¶ä¸­
2. **ä¾èµ–æ³¨å…¥**ï¼šé€šè¿‡æ„é€ å‡½æ•°æ³¨å…¥ä¾èµ–é¡¹
3. **å¼‚æ­¥ç¼–ç¨‹**ï¼šä½¿ç”¨ tokio æ¡†æ¶è¿›è¡Œå¼‚æ­¥ç¼–ç¨‹
4. **é”™è¯¯å¤„ç†**ï¼šä½¿ç”¨ anyhow åº“è¿›è¡Œé”™è¯¯å¤„ç†
5. **é…ç½®é©±åŠ¨**ï¼šé€šè¿‡é…ç½®æ–‡ä»¶é©±åŠ¨ç¨‹åºè¡Œä¸º

## 3. ä¸»è¦æ¥å£ä¸API

### 3.1 å…¬å¼€çš„å‡½æ•°å’Œæ–¹æ³•

Main ç»„ä»¶çš„ä¸»è¦å…¬å¼€æ¥å£æ˜¯ `main` å‡½æ•°ï¼Œå®ƒæ˜¯é¡¹ç›®çš„å…¥å£ç‚¹ã€‚è¯¥å‡½æ•°æ˜¯å¼‚æ­¥çš„ï¼Œè¿”å› `Result<()>` ç±»å‹ã€‚

### 3.2 ä¸»è¦æ¥å£è¯¦ç»†è¯´æ˜

#### 3.2.1 main å‡½æ•°

```rust
#[tokio::main]
async fn main() -> Result<()> {
    // å‘½ä»¤è¡Œå‚æ•°è§£æ
    let cli = Cli::parse();

    // é…ç½®åˆ›å»º
    let config = cli.to_config();

    // è¾“å‡ºæ¬¢è¿ä¿¡æ¯
    println!("Litho - ç”±äºRustä¸AIé©±åŠ¨çš„C4æ¶æ„æ–‡æ¡£ç”Ÿæˆå¼•æ“");
    println!("æ­£åœ¨åˆ†æé¡¹ç›®: {}", config.project_path.display());

    // æ£€æŸ¥æ˜¯å¦å¯ç”¨ReActæ¨¡å¼
    if config.react.enable_react_mode {
        // ReActæ¨¡å¼åˆ†ææµç¨‹
        // ...ï¼ˆè¯¦è§å®ç°ç»†èŠ‚éƒ¨åˆ†ï¼‰
    } else {
        // æ™®é€šæ¨¡å¼åˆ†ææµç¨‹
        // ...ï¼ˆè¯¦è§å®ç°ç»†èŠ‚éƒ¨åˆ†ï¼‰
    }

    println!("æ–‡æ¡£ç”Ÿæˆå®Œæˆï¼è¾“å‡ºç›®å½•: {}", config.output_path.display());
    Ok(())
}
```

#### 3.2.2 è¾“å…¥å‚æ•°

Main å‡½æ•°é€šè¿‡ `Cli` ç»“æ„ä½“æ¥æ”¶è¾“å…¥å‚æ•°ï¼Œ`Cli` ç»“æ„ä½“å®šä¹‰åœ¨ `cli.rs` ä¸­ã€‚ä¸»è¦å‚æ•°åŒ…æ‹¬ï¼š

- `project`: è¦åˆ†æçš„é¡¹ç›®è·¯å¾„
- `output`: æ–‡æ¡£è¾“å‡ºè·¯å¾„
- `config`: é…ç½®æ–‡ä»¶è·¯å¾„
- `format`: æ–‡æ¡£æ ¼å¼
- `depth`: æœ€å¤§é€’å½’æ·±åº¦
- `skip_metadata`: æ˜¯å¦è·³è¿‡å…ƒæ•°æ®æå–
- `skip_analysis`: æ˜¯å¦è·³è¿‡LLMåˆ†æ
- `no_deps`: æ˜¯å¦ä¸åˆ†æä¾èµ–å…³ç³»
- `no_components`: æ˜¯å¦ä¸è¯†åˆ«æ ¸å¿ƒç»„ä»¶
- `no_tests`: æ˜¯å¦ä¸åŒ…æ‹¬æµ‹è¯•æ–‡ä»¶
- `include_hidden`: æ˜¯å¦åŒ…æ‹¬éšè—æ–‡ä»¶
- `exclude_ext`: è¦æ’é™¤çš„æ–‡ä»¶æ‰©å±•å
- `include_ext`: åªåŒ…å«çš„æ–‡ä»¶æ‰©å±•å
- `react_mode`: æ˜¯å¦å¯ç”¨ReActæ¨¡å¼
- `max_iterations`: ReActæ¨¡å¼çš„æœ€å¤§è¿­ä»£æ¬¡æ•°
- `exploration_depth`: æ¢ç´¢æ·±åº¦çº§åˆ«
- `verbose`: æ˜¯å¦å¯ç”¨è¯¦ç»†æ—¥å¿—
- `debug`: æ˜¯å¦å¯ç”¨è°ƒè¯•æ¨¡å¼
- `doc_type`: è¦ç”Ÿæˆçš„æ–‡æ¡£ç±»å‹

#### 3.2.3 è¿”å›å€¼

Main å‡½æ•°è¿”å› `Result<()>` ç±»å‹ï¼Œè¡¨ç¤ºæ“ä½œæ˜¯å¦æˆåŠŸã€‚å¦‚æœæ“ä½œæˆåŠŸï¼Œè¿”å› `Ok(())`ï¼›å¦‚æœæ“ä½œå¤±è´¥ï¼Œè¿”å› `Err` ç±»å‹çš„é”™è¯¯ã€‚

#### 3.2.4 å¼‚å¸¸å¤„ç†

Main å‡½æ•°ä½¿ç”¨ anyhow åº“è¿›è¡Œé”™è¯¯å¤„ç†ã€‚åœ¨å‡½æ•°å†…éƒ¨ï¼Œä»»ä½•å¯èƒ½æŠ›å‡ºé”™è¯¯çš„æ“ä½œéƒ½ä¼šè¢«åŒ…è£…åœ¨ `?` è¿ç®—ç¬¦ä¸­ï¼Œä»¥ä¾¿å°†é”™è¯¯ä¼ æ’­åˆ°è°ƒç”¨è€…ã€‚

### 3.3 ä½¿ç”¨æ–¹å¼å’Œè°ƒç”¨çº¦å®š

Main å‡½æ•°æ˜¯é¡¹ç›®çš„å…¥å£ç‚¹ï¼Œé€šå¸¸é€šè¿‡å‘½ä»¤è¡Œè°ƒç”¨ã€‚ç”¨æˆ·å¯ä»¥é€šè¿‡å‘½ä»¤è¡Œå‚æ•°é…ç½®ç¨‹åºè¡Œä¸ºã€‚ä¾‹å¦‚ï¼š

```bash
# åˆ†æå½“å‰ç›®å½•çš„é¡¹ç›®ï¼Œè¾“å‡ºåˆ° ./litho.docs ç›®å½•
./target/release/litho

# åˆ†ææŒ‡å®šç›®å½•çš„é¡¹ç›®ï¼Œè¾“å‡ºåˆ°æŒ‡å®šç›®å½•
./target/release/litho --project /path/to/project --output /path/to/output

# å¯ç”¨ReActæ¨¡å¼
./target/release/litho --react-mode
```

## 4. å®ç°ç»†èŠ‚ä¸æ ¸å¿ƒç®—æ³•

### 4.1 å…³é”®ä¸šåŠ¡é€»è¾‘

Main ç»„ä»¶çš„ä¸»è¦ä¸šåŠ¡é€»è¾‘åŒ…æ‹¬ï¼š

1. **å‘½ä»¤è¡Œå‚æ•°è§£æ**ï¼šä½¿ç”¨ clap åº“è§£æå‘½ä»¤è¡Œå‚æ•°
2. **é…ç½®åˆ›å»º**ï¼šæ ¹æ®å‘½ä»¤è¡Œå‚æ•°åˆ›å»ºé…ç½®å¯¹è±¡
3. **å·¥ä½œæµç¨‹é€‰æ‹©**ï¼šæ ¹æ®é…ç½®é€‰æ‹©ä¸åŒçš„å·¥ä½œæµç¨‹ï¼ˆReAct æ¨¡å¼æˆ–æ™®é€šæ¨¡å¼ï¼‰
4. **å…ƒæ•°æ®æå–**ï¼šæå–é¡¹ç›®å…ƒæ•°æ®
5. **LLM åˆ†æ**ï¼šä½¿ç”¨ LLM åˆ†æé¡¹ç›®å…ƒæ•°æ®
6. **æ–‡æ¡£ç”Ÿæˆ**ï¼šç”Ÿæˆæ–‡æ¡£
7. **æ–‡æ¡£è¾“å‡º**ï¼šè¾“å‡ºæ–‡æ¡£åˆ°æŒ‡å®šç›®å½•

### 4.2 é‡è¦ç®—æ³•å’Œæ•°æ®å¤„ç†æµç¨‹

#### 4.2.1 ReAct æ¨¡å¼åˆ†ææµç¨‹

```rust
if config.react.enable_react_mode {
    println!("ğŸ¤– å¯ç”¨ReActæ¨¡å¼è¿›è¡Œè‡ªä¸»æ¢ç´¢åˆ†æ...");

    // ä½¿ç”¨ReAct Agentè¿›è¡Œåˆ†æ
    let mut react_agent = LithoReactAgent::new(&config.project_path, config.clone()).await?;
    let analysis_result = react_agent.analyze_project().await?;

    println!("âœ… ReActåˆ†æå®Œæˆï¼");
    println!("ğŸ“Š åˆ†ææ‘˜è¦:");
    println!("{}", analysis_result.summary);

    // è¾“å‡ºåˆ†æç»“æœ
    println!("ğŸ“ ç”Ÿæˆçš„C4æ–‡æ¡£:");
    println!("ç³»ç»Ÿä¸Šä¸‹æ–‡: {}", analysis_result.c4_documentation.system_context);
    println!("å®¹å™¨æ¶æ„: {}", analysis_result.c4_documentation.container_diagram);
    println!("ç»„ä»¶è®¾è®¡: {}", analysis_result.c4_documentation.component_diagram);
    println!("ä»£ç ç»“æ„: {}", analysis_result.c4_documentation.code_diagram);

    return Ok(());
}
```

#### 4.2.2 æ™®é€šæ¨¡å¼åˆ†ææµç¨‹

```rust
// èƒ½æ•ˆæ¨¡å¼ï¼šæå–é¡¹ç›®å…ƒæ•°æ®
if !cli.skip_metadata {
    let metadata_extractor = MetadataExtractor::new(&config);

    // ä½¿ç”¨LLMåˆ†æç»„ä»¶
    println!("ğŸ¤– ä½¿ç”¨LLMåˆ†ææ ¸å¿ƒç»„ä»¶...");
    let llm_service_inst = OpenAILikeLLMService::new(&config.llm.model).await?;
    let llm_service = Box::new(llm_service_inst) as Box<dyn LLMService>;
    let metadata = metadata_extractor.extract_with_llm(llm_service).await?;

    // è¾“å‡ºé¡¹ç›®ç»“æ„æ‘˜è¦
    println!("{}", metadata.structure.generate_summary());

    // è¾“å‡ºè¿‡æ»¤åçš„æ–‡ä»¶ç»Ÿè®¡
    let filtered_files = metadata.structure.filter_files_by_config(&config);
    println!("è¿‡æ»¤åçš„æ–‡ä»¶æ•°é‡: {} (åŸå§‹: {})",
             filtered_files.len(),
             metadata.structure.total_files());

    // ä½¿ç”¨LLMè¿›è¡Œåˆ†æ
    if !cli.skip_analysis {
        let llm_manager = LlmManager::new(&config).await?;

        // ç”Ÿæˆè¿‡ç¨‹æ•°æ® - é¡¹ç›®æ•´ä½“æ¦‚è¦æ–‡æ¡£
        let analysis_results = llm_manager.analyze_project(&metadata).await?;
        println!("analysis_results = {}", analysis_results);

        // ç”Ÿæˆæ–‡æ¡£
        let llm_client_inst = OpenAILikeLLMService::new(&config.llm.model).await?;
        let llm_client = Arc::new(llm_client_inst) as Arc<dyn LLMService>;
        let doc_generator_manager = DocumentGeneratorManager::new(&config, llm_client);
        let documents = doc_generator_manager
            .generate_documents(&metadata, &analysis_results)
            .await?;

        // è¾“å‡ºæ–‡æ¡£
        let outlet = tools::outlet::FileSystemOutlet::new(&config);
        let output_paths = outlet
            .output_documents(&documents, &config.output_path)
            .await?;

        // æ˜¾ç¤ºè¾“å‡ºæ‘˜è¦
        println!("{}", outlet.get_output_summary(&output_paths));
    }
}
```

### 4.3 æ€§èƒ½è€ƒè™‘å’Œä¼˜åŒ–ç‚¹

1. **å¼‚æ­¥ç¼–ç¨‹**ï¼šä½¿ç”¨ tokio æ¡†æ¶è¿›è¡Œå¼‚æ­¥ç¼–ç¨‹ï¼Œæé«˜ I/O æ“ä½œçš„æ€§èƒ½
2. **ä¾èµ–æ³¨å…¥**ï¼šé€šè¿‡æ„é€ å‡½æ•°æ³¨å…¥ä¾èµ–é¡¹ï¼Œæé«˜ä»£ç çš„å¯æµ‹è¯•æ€§å’Œå¯ç»´æŠ¤æ€§
3. **é”™è¯¯å¤„ç†**ï¼šä½¿ç”¨ anyhow åº“è¿›è¡Œé”™è¯¯å¤„ç†ï¼Œç®€åŒ–é”™è¯¯å¤„ç†ä»£ç 
4. **é…ç½®é©±åŠ¨**ï¼šé€šè¿‡é…ç½®æ–‡ä»¶é©±åŠ¨ç¨‹åºè¡Œä¸ºï¼Œæé«˜çµæ´»æ€§
5. **æ¨¡å—åŒ–è®¾è®¡**ï¼šå°†ä¸åŒåŠŸèƒ½æ¨¡å—åˆ†ç¦»åˆ°ä¸åŒçš„æ–‡ä»¶ä¸­ï¼Œæé«˜ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§

## 5. ä¾èµ–å…³ç³»åˆ†æ

### 5.1 ä¾èµ–ç»„ä»¶åŠå…¶ä½œç”¨

Main ç»„ä»¶ä¾èµ–ä»¥ä¸‹ç»„ä»¶ï¼š

1. **Cli**ï¼šå‘½ä»¤è¡Œå‚æ•°è§£æå™¨ï¼Œè´Ÿè´£è§£æå‘½ä»¤è¡Œå‚æ•°
2. **Config**ï¼šé¡¹ç›®é…ç½®ç»“æ„ä½“ï¼Œè´Ÿè´£ç®¡ç†é¡¹ç›®é…ç½®
3. **DocumentGeneratorManager**ï¼šæ–‡æ¡£ç”Ÿæˆå™¨ç®¡ç†å™¨ï¼Œè´Ÿè´£ç”Ÿæˆæ–‡æ¡£
4. **LlmManager**ï¼šLLM ç®¡ç†å™¨ï¼Œè´Ÿè´£ç®¡ç† LLM æœåŠ¡
5. **MetadataExtractor**ï¼šå…ƒæ•°æ®æå–å™¨ï¼Œè´Ÿè´£æå–é¡¹ç›®å…ƒæ•°æ®
6. **LithoReactAgent**ï¼šReAct æ¨¡å¼ä»£ç†ï¼Œè´Ÿè´£è‡ªä¸»æ¢ç´¢åˆ†æ
7. **DocumentOutlet**ï¼šæ–‡æ¡£è¾“å‡ºå™¨ï¼Œè´Ÿè´£è¾“å‡ºæ–‡æ¡£

### 5.2 è¢«ä¾èµ–å…³ç³»

Main ç»„ä»¶ä½œä¸ºé¡¹ç›®çš„å…¥å£ç‚¹ï¼Œé€šå¸¸ä¸ä¼šè¢«å…¶ä»–ç»„ä»¶ç›´æ¥ä¾èµ–ã€‚å…¶ä»–ç»„ä»¶é€šå¸¸é€šè¿‡ Main ç»„ä»¶çš„é…ç½®å’Œå‚æ•°é—´æ¥ä½¿ç”¨ã€‚

### 5.3 é…ç½®æ–‡ä»¶å…³ç³»

Main ç»„ä»¶ä½¿ç”¨ `config.rs` ä¸­å®šä¹‰çš„ `Config` ç»“æ„ä½“è¿›è¡Œé…ç½®ç®¡ç†ã€‚`Config` ç»“æ„ä½“åŒ…å«ä»¥ä¸‹é…ç½®é¡¹ï¼š

1. **é¡¹ç›®é…ç½®**ï¼š
   - `project_name`: é¡¹ç›®åç§°
   - `project_path`: é¡¹ç›®è·¯å¾„
   - `output_path`: è¾“å‡ºè·¯å¾„
   - `document_format`: æ–‡æ¡£æ ¼å¼
   - `analyze_dependencies`: æ˜¯å¦åˆ†æä¾èµ–å…³ç³»
   - `identify_components`: æ˜¯å¦è¯†åˆ«æ ¸å¿ƒç»„ä»¶
   - `max_depth`: æœ€å¤§é€’å½’æ·±åº¦
   - `weight_file_size`: æ–‡ä»¶å¤§å°æƒé‡
   - `weight_file_location`: æ–‡ä»¶ä½ç½®æƒé‡
   - `weight_file_type`: æ–‡ä»¶ç±»å‹æƒé‡
   - `weight_dependency_count`: ä¾èµ–è®¡æ•°æƒé‡
   - `weight_file_recency`: æ–‡ä»¶æ›´æ–°æ—¶é—´æƒé‡
   - `weight_code_complexity`: ä»£ç å¤æ‚åº¦æƒé‡
   - `core_component_percentage`: æ ¸å¿ƒç»„ä»¶çš„ç™¾åˆ†æ¯”
   - `max_file_size`: æœ€å¤§æ–‡ä»¶å¤§å°é™åˆ¶
   - `include_tests`: æ˜¯å¦åŒ…æ‹¬æµ‹è¯•æ–‡ä»¶
   - `include_hidden`: æ˜¯å¦åŒ…æ‹¬éšè—æ–‡ä»¶
   - `excluded_dirs`: è¦æ’é™¤çš„ç›®å½•
   - `excluded_files`: è¦æ’é™¤çš„æ–‡ä»¶
   - `excluded_extensions`: è¦æ’é™¤çš„æ–‡ä»¶æ‰©å±•å
   - `included_extensions`: åªåŒ…å«çš„æ–‡ä»¶æ‰©å±•å

2. **LLM é…ç½®**ï¼š
   - `model`: ä½¿ç”¨çš„æ¨¡å‹
   - `max_tokens`: æœ€å¤§ tokens
   - `temperature`: æ¸©åº¦
   - `stream`: æ˜¯å¦æµå¼è¾“å‡º
   - `context_window`: ä¸Šä¸‹æ–‡çª—å£å¤§å°
   - `retry`: é‡è¯•é…ç½®

3. **ReAct é…ç½®**ï¼š
   - `enable_react_mode`: æ˜¯å¦å¯ç”¨ ReAct æ¨¡å¼
   - `max_iterations`: æœ€å¤§è¿­ä»£æ¬¡æ•°
   - `exploration_depth`: æ¢ç´¢æ·±åº¦çº§åˆ«

4. **å…¶ä»–é…ç½®**ï¼š
   - `system_prompt_template_path`: ç³»ç»Ÿæç¤ºæ¨¡æ¿è·¯å¾„
   - `architecture_meta_path`: æ¶æ„å…ƒæè¿°æ–‡ä»¶è·¯å¾„

### 5.4 ç»„ä»¶é—´çš„æ•°æ®æµå’Œè°ƒç”¨å…³ç³»

Main ç»„ä»¶çš„æ•°æ®æµå’Œè°ƒç”¨å…³ç³»å¦‚ä¸‹ï¼š

1. **å‘½ä»¤è¡Œå‚æ•°è§£æ**ï¼šé€šè¿‡ `Cli` ç»“æ„ä½“è§£æå‘½ä»¤è¡Œå‚æ•°
2. **é…ç½®åˆ›å»º**ï¼šé€šè¿‡ `Cli` ç»“æ„ä½“çš„ `to_config` æ–¹æ³•åˆ›å»º `Config` å¯¹è±¡
3. **å·¥ä½œæµç¨‹é€‰æ‹©**ï¼šæ ¹æ® `Config` å¯¹è±¡ä¸­çš„ `react.enable_react_mode` å­—æ®µé€‰æ‹©ä¸åŒçš„å·¥ä½œæµç¨‹
4. **å…ƒæ•°æ®æå–**ï¼šé€šè¿‡ `MetadataExtractor` ç»“æ„ä½“æå–é¡¹ç›®å…ƒæ•°æ®
5. **LLM åˆ†æ**ï¼šé€šè¿‡ `LlmManager` ç»“æ„ä½“ä½¿ç”¨ LLM åˆ†æé¡¹ç›®å…ƒæ•°æ®
6. **æ–‡æ¡£ç”Ÿæˆ**ï¼šé€šè¿‡ `DocumentGeneratorManager` ç»“æ„ä½“ç”Ÿæˆæ–‡æ¡£
7. **æ–‡æ¡£è¾“å‡º**ï¼šé€šè¿‡ `DocumentOutlet` ç»“æ„ä½“è¾“å‡ºæ–‡æ¡£

## 6. é…ç½®ä¸ç¯å¢ƒ

### 6.1 ç›¸å…³é…ç½®æ–‡ä»¶

Main ç»„ä»¶ä½¿ç”¨ `config.rs` ä¸­å®šä¹‰çš„ `Config` ç»“æ„ä½“è¿›è¡Œé…ç½®ç®¡ç†ã€‚`Config` ç»“æ„ä½“å¯ä»¥é€šè¿‡å‘½ä»¤è¡Œå‚æ•°æˆ–é…ç½®æ–‡ä»¶è¿›è¡Œé…ç½®ã€‚

### 6.2 ç¯å¢ƒå˜é‡å’Œè¿è¡Œæ—¶å‚æ•°

Main ç»„ä»¶ä¸ç›´æ¥ä½¿ç”¨ç¯å¢ƒå˜é‡ï¼Œè€Œæ˜¯é€šè¿‡å‘½ä»¤è¡Œå‚æ•°æˆ–é…ç½®æ–‡ä»¶è¿›è¡Œé…ç½®ã€‚

### 6.3 éƒ¨ç½²å’Œé›†æˆè¦æ±‚

1. **Rust å·¥å…·é“¾**ï¼šéœ€è¦å®‰è£… Rust å·¥å…·é“¾
2. **ä¾èµ–é¡¹**ï¼šéœ€è¦å®‰è£…é¡¹ç›®ä¾èµ–é¡¹ï¼Œå¯ä»¥é€šè¿‡ `cargo build` è‡ªåŠ¨å®‰è£…
3. **é…ç½®æ–‡ä»¶**ï¼šéœ€è¦åˆ›å»ºæˆ–ç¼–è¾‘é…ç½®æ–‡ä»¶ `config.toml`
4. **LLM API å¯†é’¥**ï¼šéœ€è¦é…ç½® LLM API å¯†é’¥

## 7. ä½¿ç”¨ç¤ºä¾‹ä¸æœ€ä½³å®è·µ

### 7.1 å…¸å‹ä½¿ç”¨åœºæ™¯

#### 7.1.1 åŸºæœ¬ä½¿ç”¨

```bash
# åˆ†æå½“å‰ç›®å½•çš„é¡¹ç›®ï¼Œè¾“å‡ºåˆ° ./litho.docs ç›®å½•
./target/release/litho

# åˆ†ææŒ‡å®šç›®å½•çš„é¡¹ç›®ï¼Œè¾“å‡ºåˆ°æŒ‡å®šç›®å½•
./target/release/litho --project /path/to/project --output /path/to/output
```

#### 7.1.2 å¯ç”¨ ReAct æ¨¡å¼

```bash
# å¯ç”¨ ReAct æ¨¡å¼è¿›è¡Œè‡ªä¸»æ¢ç´¢åˆ†æ
./target/release/litho --react-mode

# å¯ç”¨ ReAct æ¨¡å¼å¹¶è®¾ç½®æœ€å¤§è¿­ä»£æ¬¡æ•°
./target/release/litho --react-mode --max-iterations 50

# å¯ç”¨ ReAct æ¨¡å¼å¹¶è®¾ç½®æ¢ç´¢æ·±åº¦çº§åˆ«
./target/release/litho --react-mode --exploration-depth deep
```

#### 7.1.3 è‡ªå®šä¹‰æ–‡æ¡£æ ¼å¼

```bash
# ç”Ÿæˆ HTML æ ¼å¼çš„æ–‡æ¡£
./target/release/litho --format html

# ç”Ÿæˆ Markdown æ ¼å¼çš„æ–‡æ¡£
./target/release/litho --format markdown
```

### 7.2 å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ

#### 7.2.1 é—®é¢˜ï¼šLLM API å¯†é’¥æœªé…ç½®

**è§£å†³æ–¹æ¡ˆ**ï¼šåœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½® LLM API å¯†é’¥ã€‚

```toml
[llm]
api_key = "your_api_key_here"
```

#### 7.2.2 é—®é¢˜ï¼šåˆ†æå¤§å‹é¡¹ç›®æ—¶å†…å­˜ä¸è¶³

**è§£å†³æ–¹æ¡ˆ**ï¼šå¢åŠ ç³»ç»Ÿå†…å­˜æˆ–å‡å°‘åˆ†ææ·±åº¦ã€‚

```bash
# å‡å°‘æœ€å¤§é€’å½’æ·±åº¦
./target/release/litho --depth 5
```

#### 7.2.3 é—®é¢˜ï¼šç”Ÿæˆçš„æ–‡æ¡£ä¸å®Œæ•´

**è§£å†³æ–¹æ¡ˆ**ï¼šæ£€æŸ¥é…ç½®æ–‡ä»¶ä¸­çš„æ’é™¤é¡¹ï¼Œç¡®ä¿æ²¡æœ‰æ’é™¤å¿…è¦çš„æ–‡ä»¶æˆ–ç›®å½•ã€‚

```toml
# ç¡®ä¿æ²¡æœ‰æ’é™¤å¿…è¦çš„æ–‡ä»¶æˆ–ç›®å½•
excluded_dirs = []
excluded_files = []
excluded_extensions = []
```

### 7.3 å¼€å‘å’Œç»´æŠ¤å»ºè®®

1. **æ¨¡å—åŒ–è®¾è®¡**ï¼šä¿æŒæ¨¡å—åŒ–è®¾è®¡ï¼Œä¾¿äºç»´æŠ¤å’Œæ‰©å±•
2. **å•å…ƒæµ‹è¯•**ï¼šç¼–å†™å•å…ƒæµ‹è¯•ï¼Œç¡®ä¿ä»£ç è´¨é‡
3. **æ–‡æ¡£ç¼–å†™**ï¼šä¿æŒä»£ç å’Œæ–‡æ¡£åŒæ­¥ï¼Œç¡®ä¿æ–‡æ¡£çš„å‡†ç¡®æ€§
4. **é”™è¯¯å¤„ç†**ï¼šä¼˜åŒ–é”™è¯¯å¤„ç†ï¼Œæä¾›æ›´è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯
5. **æ€§èƒ½ä¼˜åŒ–**ï¼šæŒç»­ä¼˜åŒ–æ€§èƒ½ï¼Œæé«˜åˆ†æé€Ÿåº¦

## 8. æ‰©å±•ä¸ç»´æŠ¤

### 8.1 ç»„ä»¶çš„æ‰©å±•ç‚¹å’Œå¯å®šåˆ¶æ€§

1. **å‘½ä»¤è¡Œå‚æ•°**ï¼šå¯ä»¥é€šè¿‡æ‰©å±• `Cli` ç»“æ„ä½“æ·»åŠ æ–°çš„å‘½ä»¤è¡Œå‚æ•°
2. **é…ç½®é¡¹**ï¼šå¯ä»¥é€šè¿‡æ‰©å±• `Config` ç»“æ„ä½“æ·»åŠ æ–°çš„é…ç½®é¡¹
3. **å·¥ä½œæµç¨‹**ï¼šå¯ä»¥é€šè¿‡ä¿®æ”¹ `main` å‡½æ•°ä¸­çš„å·¥ä½œæµç¨‹é€»è¾‘è¿›è¡Œæ‰©å±•
4. **æ–‡æ¡£ç”Ÿæˆ**ï¼šå¯ä»¥é€šè¿‡æ‰©å±• `DocumentGeneratorManager` ç»“æ„ä½“æ·»åŠ æ–°çš„æ–‡æ¡£ç”Ÿæˆé€»è¾‘

### 8.2 æœªæ¥æ”¹è¿›æ–¹å‘

1. **æ”¯æŒæ›´å¤šæ–‡æ¡£æ ¼å¼**ï¼šæ”¯æŒæ›´å¤šçš„æ–‡æ¡£æ ¼å¼ï¼Œå¦‚ PDFã€Word ç­‰
2. **å¢å¼º ReAct æ¨¡å¼**ï¼šå¢å¼º ReAct æ¨¡å¼çš„æ™ºèƒ½æ€§å’Œè‡ªä¸»æ€§
3. **æé«˜æ€§èƒ½**ï¼šä¼˜åŒ–æ€§èƒ½ï¼Œæé«˜åˆ†æé€Ÿåº¦
4. **å¢å¼ºé”™è¯¯å¤„ç†**ï¼šæä¾›æ›´è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯å’Œå»ºè®®
5. **å¢å¼ºé…ç½®ç®¡ç†**ï¼šæä¾›æ›´çµæ´»çš„é…ç½®ç®¡ç†æ–¹å¼

### 8.3 ç»´æŠ¤æ³¨æ„äº‹é¡¹

1. **ä»£ç è´¨é‡**ï¼šä¿æŒä»£ç è´¨é‡ï¼Œç¡®ä¿ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§
2. **æ–‡æ¡£åŒæ­¥**ï¼šä¿æŒä»£ç å’Œæ–‡æ¡£åŒæ­¥ï¼Œç¡®ä¿æ–‡æ¡£çš„å‡†ç¡®æ€§
3. **æµ‹è¯•è¦†ç›–ç‡**ï¼šä¿æŒé«˜æµ‹è¯•è¦†ç›–ç‡ï¼Œç¡®ä¿ä»£ç çš„ç¨³å®šæ€§
4. **ä¾èµ–ç®¡ç†**ï¼šç®¡ç†ä¾èµ–é¡¹ï¼Œç¡®ä¿ä¾èµ–é¡¹çš„å…¼å®¹æ€§å’Œå®‰å…¨æ€§
5. **é”™è¯¯å¤„ç†**ï¼šä¼˜åŒ–é”™è¯¯å¤„ç†ï¼Œæä¾›æ›´è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯å’Œå»ºè®®