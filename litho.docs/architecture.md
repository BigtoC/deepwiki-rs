# 架构文档

## 整体架构
该系统采用模块化架构和分层架构模式，具有清晰的模块化结构和良好的职责分离。系统主要使用Rust语言开发，注重性能和安全性。核心组件包括架构检测、文件探索、依赖分析、代码分析、图像预处理、架构文档生成等。系统设计遵循单一职责原则、开闭原则和依赖倒置原则，具有良好的扩展性和可维护性。

### 架构模式
- 模块化架构
- 分层架构

### 设计原则
- 单一职责原则
- 开闭原则
- 依赖倒置原则
- 模块化设计
- 清晰的目录结构
- 高性能和安全性
- 图像处理优化
- 全面的测试策略
- 依赖注入
- 定期代码审查

## 核心流程
### 图像处理流水线
**描述**: 图像处理流水线

**处理步骤**:
1. 图像预处理
2. 架构检测
3. 文件探索
4. 依赖分析
5. 代码分析

**涉及组件**:
- preprocessing_agent.rs
- architecture_detector.rs
- file_explorer.rs
- dependency_analyzer.rs
- code_analyzer.rs

### 架构文档生成
**描述**: 架构文档生成

**处理步骤**:
1. 研究与分析
2. 文档生成
3. 客户端交互
4. 类型定义

**涉及组件**:
- c4_documentation_agent.rs
- research_agent.rs
- client.rs
- types.rs

## 核心模块详解
### architecture_detector.rs
**用途**: 架构检测

**主要职责**:
- 检测系统架构

**提供接口**:
- 与其他模块的交互接口

### file_explorer.rs
**用途**: 文件探索

**主要职责**:
- 探索文件系统

**提供接口**:
- 与其他模块的交互接口

### dependency_analyzer.rs
**用途**: 依赖分析

**主要职责**:
- 分析组件依赖

**提供接口**:
- 与其他模块的交互接口

### mod.rs (tools)
**用途**: 工具模块管理

**主要职责**:
- 管理工具模块

**提供接口**:
- 模块初始化和管理

### code_analyzer.rs
**用途**: 代码分析

**主要职责**:
- 分析代码质量

**提供接口**:
- 与其他模块的交互接口

### types.rs
**用途**: 类型定义

**主要职责**:
- 定义系统类型

**提供接口**:
- 类型定义和管理

### client.rs
**用途**: 客户端交互

**主要职责**:
- 与LLM进行交互

**提供接口**:
- 与LLM的交互接口

### mod.rs (llm)
**用途**: LLM模块管理

**主要职责**:
- 管理LLM模块

**提供接口**:
- 模块初始化和管理

### mod.rs (cache)
**用途**: 缓存模块管理

**主要职责**:
- 管理缓存模块

**提供接口**:
- 模块初始化和管理

### config.rs
**用途**: 配置管理

**主要职责**:
- 管理系统配置

**提供接口**:
- 配置管理接口

### lib.rs
**用途**: 库管理

**主要职责**:
- 管理系统库

**提供接口**:
- 库初始化和管理

### preprocessing_agent.rs
**用途**: 图像预处理

**主要职责**:
- 预处理图像数据

**提供接口**:
- 与其他模块的交互接口

### mod.rs (agents)
**用途**: 代理模块管理

**主要职责**:
- 管理代理模块

**提供接口**:
- 模块初始化和管理

### c4_documentation_agent.rs
**用途**: 架构文档生成

**主要职责**:
- 生成C4架构文档

**提供接口**:
- 与其他模块的交互接口

### research_agent.rs
**用途**: 研究与分析

**主要职责**:
- 进行研究和分析

**提供接口**:
- 与其他模块的交互接口

